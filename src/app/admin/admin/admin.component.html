<div class="container w-25 mt-5">
  <h4 class="text-center mt-5 mb-5">Available actions</h4>
  <form
    [formGroup]="changeRoleForm"
    (ngSubmit)="onSubmitButtonClicked()"
    class="text-center"
  >
    <mat-form-field class="mb-2 w-75 mx-auto">
      <mat-label for="user">User</mat-label>
      <mat-select formControlName="user" name="user" placeholder="Choose">
        <mat-option *ngFor="let user of users" value="{{ user.username }}">{{
          user.username
          }} ({{getRole(user)}})</mat-option>
      </mat-select>
      <mat-error *ngIf="changeRoleForm.hasError('required', 'user')">
        User is <strong>required</strong>
      </mat-error>
    </mat-form-field>

    <mat-form-field class="mb-2 w-75 mx-auto">
      <mat-label for="role">Role</mat-label>
      <mat-select formControlName="role" name="role" placeholder="Choose">
        <mat-option *ngFor="let role of roles" value="{{ role.authority }}">{{
          role.authority
          }}</mat-option>
      </mat-select>
      <mat-error *ngIf="changeRoleForm.hasError('required', 'role')">
        Role is <strong>required</strong>
      </mat-error>
    </mat-form-field>
    <button class="btn btn-primary text-center mt-3" type="submit">Change role</button>
  </form>
  <div class="row mt-3 alert alert-info" *ngIf="message">
    <span class="text-info">
      {{ message }}
    </span>
  </div>
  <div class="row mt-3 alert alert-danger" *ngIf="validationErrors">
    <span class="text-danger">
      {{ validationErrors }}
    </span>
  </div>

  <form
    [formGroup]="addCourseForm"
    (ngSubmit)="addCourse()"
    class="text-center"
  >
    <mat-form-field class="mb-2 w-75 mx-auto">
      <mat-label for="name">Course name</mat-label>
        <input
          matInput
          formControlName="course"
          name="name"
          type="text"
          required
        />
      <mat-error *ngIf="changeRoleForm.hasError('required', 'user')">
        Course name is <strong>required</strong>
      </mat-error>
    </mat-form-field>

    <mat-form-field class="mb-2 w-75 mx-auto">
      <mat-label for="totalHours">Total hours</mat-label>
      <input
        matInput
        formControlName="hours"
        name="totalHours"
        type="number"
        step="0.1"
        min="1"
        required
      />
      <mat-error *ngIf="changeRoleForm.hasError('required', 'user')">
        Total hours are <strong>required</strong>
      </mat-error>
    </mat-form-field>
    <button class="btn btn-primary text-center mt-3" type="submit">Add course</button>
  </form>
  <div class="row mt-3 alert alert-info" *ngIf="messageAddCourse">
    <span class="text-info">
      {{ messageAddCourse }}
    </span>
  </div>
  <div class="row mt-3 alert alert-danger" *ngIf="validationErrorsAddCourse">
    <span class="text-danger">
      {{ validationErrorsAddCourse }}
    </span>
  </div>
</div>
